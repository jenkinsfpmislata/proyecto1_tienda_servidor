<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html>
    <head>
        <script src="../js/jquery-1.6.3.min.js"></script>
        <script>
            $(document).ready(function() {
                $.ajax({
                    dataType: 'json',
                    url: 'clientes.php',
                    success: function(data) {
                        datos = '<table><tr><td>ID</td><td>nombre</td><td>Opciones</td>';
                        $variable = 0;
                        $.each(data, function(index) {
                            datos += '<tr><td>' + data[index].idCliente + '</td><td>' + data[index].nombre + '</td><td><a href=javascript:borrar(' + data[index].idCliente + ')>Borrar</a></td><td><a href=javascript:actualizar(' + data[index].idCliente + ')>Update</a></td></tr>';
                        });
                        datos += '</table><a href="javascript:insertar()">Insertar Cliente</a>';
                        $('#clientes').html(datos);
                    }
                });
            });

            function borrar(id) {
                $.ajax({
                    dataType: 'json',
                    url: 'clientes_delete.php',
                    type: 'POST',
                    data: 'id=' + id,
                    success: function() {
                        $.ajax({
                            dataType: 'json',
                            url: 'clientes.php',
                            success: function(data) {
                                datos = '<table><tr><td>ID</td><td>nombre</td><td>Opciones</td>';
                                $variable = 0;
                                $.each(data, function(index) {
                                    datos += '<tr><td>' + data[index].idCliente + '</td><td>' + data[index].nombre + '</td><td><a href=javascript:borrar(' + data[index].idCliente + ')>Borrar</a></td><td><a href=javascript:actualizar(' + data[index].idCliente + ')>Update</a></td></tr>';
                                });
                                datos += '</table><a href="javascript:insertar()">Insertar Cliente</a>';
                                $('#clientes').html(datos);
                            }
                        });
                    }
                });
            }
            function actualizar(id) {
                $.ajax({
                    url: 'clientes_form_update.php',
                    type: 'POST',
                    data: 'id=' + id,
                    success: function(data) {
                        $('#clientes').html(data);
                    }
                });
            }
            function insertar() {
                $.ajax({
                    url: 'clientes_form_new.html',
                    success: function(data) {
                        $('#clientes').html(data);
                    }
                });
            }
        </script>
    </head>
    <body>
        <h3>Clientes</h3>
        <div id="clientes"></div>
    </body>
</html>
